:: ============================================
:: ðŸ’»  SCRIPT DE COMPILACIÃ“N Y EJECUCIÃ“N JAR
:: ============================================
:: Proyecto: OpenCash
:: Autor: JGB Corporate
:: AÃ±o: Â© 2025
:: DescripciÃ³n:
::   Este script limpia el proyecto, genera el .jar
::   y luego lo ejecuta guardando el log de salida.
:: ============================================

@echo off
title OpenCash - Ejecutar Proyecto
cd /d "%~dp0"

:: --------------------------------------------
:: ðŸ”¹ 1. LIMPIAR Y COMPILAR EL PROYECTO
:: --------------------------------------------
echo ðŸ”„ Limpiando proyecto Maven...
mvn clean

echo âš™ï¸  Compilando y generando archivo JAR...
mvn package

:: --------------------------------------------
:: ðŸ”¹ 2. CONFIGURAR VARIABLES DEL JDK
:: --------------------------------------------
:: AsegÃºrate de tener instalado el JDK 17 o 21
set JAVA_HOME=C:\Program Files\Java\jdk-21
set PATH=%JAVA_HOME%\bin;%PATH%

:: --------------------------------------------
:: ðŸ”¹ 3. NOMBRE DEL ARCHIVO JAR
:: --------------------------------------------
set JAR_NAME=utilsac-1.0-SNAPSHOT.jar

:: --------------------------------------------
:: ðŸ”¹ 4. EJECUTAR EL PROGRAMA Y GUARDAR LOG
:: --------------------------------------------
echo ðŸš€ Iniciando OpenCash...
java -jar "%JAR_NAME%" > log.txt 2>&1

:: (Si deseas conservar logs anteriores usa ">>" en vez de ">")
:: Ejemplo:
:: java -jar "%JAR_NAME%" >> log.txt 2>&1

:: --------------------------------------------
:: ðŸ”¹ 5. FINALIZAR / PAUSA PARA VER RESULTADO
:: --------------------------------------------
echo âœ… EjecuciÃ³n finalizada. Revisa "log.txt" para detalles.
pause
